# NayukiBlog

ä¸€ä¸ªåŸºäº Astro + FastAPI + SQLite çš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: [Astro](https://astro.build/) - é™æ€ç«™ç‚¹ç”Ÿæˆä¸åŠ¨æ€ç»„ä»¶
- **åç«¯**: [FastAPI](https://fastapi.tiangolo.com/) - é«˜æ€§èƒ½ Python Web æ¡†æ¶
- **æ•°æ®åº“**: SQLite - è½»é‡çº§å…³ç³»å‹æ•°æ®åº“
- **æ ·å¼**: CSS Modules / Global CSS

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
blog-project
â”œâ”€â”€ backend/          # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/          # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ db/           # æ•°æ®åº“é…ç½®ä¸è¿ç§»
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/         # Astro å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/    # é¡µé¢å¸ƒå±€
â”‚   â”‚   â””â”€â”€ pages/      # è·¯ç”±é¡µé¢
â”‚   â””â”€â”€ astro.config.mjs
â””â”€â”€ README.md
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### å‰ç«¯ (Frontend)

```bash
cd frontend
npm install
npm run dev
```

### åç«¯ (Backend)

```bash
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload
```

## âœ¨ ç‰¹æ€§

- âš¡ï¸ æé€Ÿçš„é¡µé¢åŠ è½½ (Astro)
- ğŸ”’ ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ (TypeScript + Pydantic)
- ğŸ“ Markdown åšå®¢æ’°å†™æ”¯æŒ
- ğŸ¨ å“åº”å¼è®¾è®¡

## ç³»ç»Ÿæ¶æ„

### åç«¯æ¨¡å—äº¤äº’ (app æ–‡ä»¶å¤¹ç»“æ„)

å±•ç¤ºäº† `app` ç›®å½•ä¸‹å„å­æ–‡ä»¶å¤¹å¦‚ä½•ååŒå·¥ä½œå¤„ç†è¯·æ±‚ï¼š

```mermaid
graph TD
    Req["å®¢æˆ·ç«¯è¯·æ±‚"] --> API["app/api<br>(è·¯ç”±å±‚)"]
    
    API -.-> Core["app/core<br>(é…ç½®/å®‰å…¨)"]
    API -- æ ¡éªŒ/æ ¼å¼åŒ– --> Schemas["app/schemas<br>(æ•°æ®ä¼ è¾“æ¨¡å‹)"]
    
    API -- è°ƒç”¨ä¸šåŠ¡é€»è¾‘ --> Services["app/services<br>(ä¸šåŠ¡é€»è¾‘å±‚)"]
    Services -- æ•°æ®åº“æ“ä½œ --> CRUD["app/crud<br>(æ•°æ®åº“æ“ä½œ)"]
    CRUD -- ORMæ˜ å°„ --> Models["app/models<br>(æ•°æ®åº“è¡¨æ¨¡å‹)"]
    Models -.-> DB[("SQLite")]
    
    API --> Res["è¿”å›å“åº”"]
```

### `app` ç›®å½•è¯¦ç»†è¯´æ˜

- **`api` (è·¯ç”±å±‚)**: å®šä¹‰ API æ¥å£çš„ URL è·¯å¾„å’Œ HTTP æ–¹æ³•ã€‚è´Ÿè´£æ¥æ”¶è¯·æ±‚ã€è§£æå‚æ•°ã€è°ƒç”¨ Service å±‚å¤„ç†ä¸šåŠ¡ï¼Œå¹¶è¿”å›å“åº”ã€‚
- **`core` (æ ¸å¿ƒé…ç½®)**: å­˜æ”¾é¡¹ç›®çš„æ ¸å¿ƒç»„ä»¶ã€‚åŒ…æ‹¬å…¨å±€é…ç½®ï¼ˆå¦‚æ•°æ®åº“ URLã€å¯†é’¥ï¼‰ã€å®‰å…¨è®¤è¯é€»è¾‘ï¼ˆå¦‚ JWT å¤„ç†ï¼‰ã€ä»¥åŠå…¨å±€å¼‚å¸¸å¤„ç†ç­‰ã€‚
- **`schemas` (æ•°æ®æ¨¡å‹)**: åŸºäº Pydantic çš„æ•°æ®ä¼ è¾“å¯¹è±¡ã€‚å®šä¹‰è¯·æ±‚ä½“å’Œå“åº”ä½“çš„ç»“æ„ï¼Œè´Ÿè´£æ•°æ®çš„è‡ªåŠ¨æ ¡éªŒå’Œåºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚
- **`services` (ä¸šåŠ¡é€»è¾‘)**: å¤„ç†æ ¸å¿ƒä¸šåŠ¡è§„åˆ™ã€‚å®ƒä» API å±‚æ¥æ”¶æŒ‡ä»¤ï¼Œå¯èƒ½éœ€è¦ç»„åˆå¤šä¸ª CRUD æ“ä½œæˆ–æ‰§è¡Œå¤æ‚è®¡ç®—ï¼Œä¿æŒ API å±‚ç®€æ´ã€‚
- **`crud` (æ•°æ®æ“ä½œ)**: å°è£…æ•°æ®åº“çš„åŸºæœ¬å¢åˆ æ”¹æŸ¥æ“ä½œã€‚ç›´æ¥ä½¿ç”¨ Session ä¸æ•°æ®åº“äº¤äº’ï¼Œåªå…³æ³¨æ•°æ®å­˜å–ï¼Œä¸åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚
- **`models` (æ•°æ®åº“è¡¨)**: åŸºäº SQLAlchemy çš„ ORM æ¨¡å‹ã€‚å®šä¹‰æ•°æ®åº“è¡¨çš„ç»“æ„ã€å­—æ®µç±»å‹ä»¥åŠè¡¨ä¹‹é—´çš„å…³è”å…³ç³»ã€‚

### API è¯·æ±‚å…¨æµç¨‹ç¤ºä¾‹ (ä»¥åˆ›å»ºæ–‡ç« ä¸ºä¾‹)

å½“ç”¨æˆ·å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ•°æ®åœ¨ç³»ç»Ÿä¸­çš„æµè½¬è¿‡ç¨‹å¦‚ä¸‹ï¼š

1.  **è¯·æ±‚åˆ°è¾¾ (API Layer)**
    - ç”¨æˆ·å‘é€ `POST /posts/` è¯·æ±‚ï¼ŒBody ä¸­åŒ…å«æ–‡ç« æ ‡é¢˜å’Œå†…å®¹ã€‚
    - `app/api/endpoints/posts.py` ä¸­çš„è·¯ç”±å‡½æ•°æ¥æ”¶è¯·æ±‚ã€‚

2.  **æ•°æ®æ ¡éªŒ (Schemas Layer)**
    - FastAPI è‡ªåŠ¨ä½¿ç”¨ `app/schemas/post.py` ä¸­çš„ `PostCreate` æ¨¡å‹æ ¡éªŒ JSON æ•°æ®ï¼ˆä¾‹å¦‚ï¼šæ£€æŸ¥å¿…å¡«å­—æ®µã€æ•°æ®ç±»å‹ï¼‰ã€‚

3.  **ä¸šåŠ¡å¤„ç† (Services Layer)**
    - æ ¡éªŒé€šè¿‡åï¼ŒAPI å±‚è°ƒç”¨ `app/services/post_service.py`ã€‚
    - Service å±‚æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆä¾‹å¦‚ï¼šå¤„ç†æ ‡ç­¾é€»è¾‘ã€ç”Ÿæˆæ‘˜è¦ã€æ£€æŸ¥ç”¨æˆ·æƒé™ï¼‰ã€‚

4.  **æ•°æ®åº“æ“ä½œ (CRUD Layer)**
    - Service å±‚è°ƒç”¨ `app/crud/post.py`ã€‚
    - CRUD å±‚å°† Pydantic æ•°æ®å¯¹è±¡è½¬æ¢ä¸º SQLAlchemy æ¨¡å‹å¯¹è±¡ (`app/models/post.py`)ï¼Œå¹¶æ·»åŠ åˆ°æ•°æ®åº“ä¼šè¯ä¸­ã€‚

5.  **æŒä¹…åŒ– (Database)**
    - SQLAlchemy æ‰§è¡Œ `INSERT` SQL è¯­å¥ï¼Œå°†æ•°æ®å†™å…¥ SQLite æ•°æ®åº“ã€‚

6.  **å“åº”è¿”å›**
    - æ•°æ®åº“è¿”å›æ–°åˆ›å»ºçš„è®°å½•å¯¹è±¡ã€‚
    - æ•°æ®æ²¿è°ƒç”¨é“¾è¿”å›ï¼šCRUD -> Service -> APIã€‚
    - API å±‚ä½¿ç”¨ `PostResponse` schema å°†æ•°æ®åº“æ¨¡å‹å¯¹è±¡åºåˆ—åŒ–ä¸º JSON æ ¼å¼ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚
